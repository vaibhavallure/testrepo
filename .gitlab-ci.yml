before_script:
  - echo 'Start Deployment'
stages:
  - develop
  - staging
  - alpha
  - bugfix
  - upgrade
  - deploy
develop:
  environment: development
  stage: develop
  tags:
    - development
  only:
    - development
  script:
    - mage-deploy mariatash
    - echo 'Deployed on Allure Local Dev'
staging:
  environment: staging
  stage: staging
  tags:
    - staging
  only:
    - staging
  script:
    - mage_deploy_stage mariatash
    - echo 'Deployed on Staging'
alpha:
  environment: alpha
  stage: alpha
  tags:
    - staging
  only:
    - master
  script:
    - mage-deploy mt
    - echo 'Deployed on Staging'
bugfix:
  environment: bugfixes
  stage: bugfix
  tags:
    - staging
  only:
    - bugfixes
  script:
    - mage-deploy mt-bugfixes
    - echo 'Deployed on Bugfixes Staging'

universal:  
  environment: staging
  stage: staging
  tags:
    - staging
  only:
    - universal
  script:
    - mage-deploy universal
    - echo 'Deployed on Universal Staging'

apple_pay:
  environment: apple_pay
  stage: staging
  tags:
    - staging
  only:
    - apple_pay
  script:
    - env
    - deploy-magento applepay-mariatash
    - echo 'Deployed on apple_pay Staging'

new_apple_pay:
  environment: apple_pay
  stage: staging
  tags:
    - alpha
  only:
    - apple_pay
  script:
    - mage-deploy applepay
    - echo 'Deployed on apple_pay Staging'

deploy-cloud:
  environment: production
  stage: deploy
  tags:
    - production
  only:
    - production
  script:
    - mage-deploy
    - echo 'Deployed on Production'
    
deploy-production:
  environment: production
  stage: deploy
  tags:
    - mariatash
  only:
    - cloud
  script:
    - mage-deploy
    - echo 'Deployed on Production Cloud'
