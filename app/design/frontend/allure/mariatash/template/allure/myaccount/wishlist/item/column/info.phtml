<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/* @var Mage_Wishlist_Model_Item $item */
$item = $this->getItem();
$product = $item->getProduct();
?>
<textarea class="ecp-wishlist-description" placeholder="Please, enter your comments..." name="description[<?php echo $item->getWishlistItemId() ?>]" 
maxlength="45" rows="2" cols="5"  title="<?php echo $this->__('Comment') ?>"><?php echo ($this->escapeHtml($item->getDescription())) ?></textarea>
<div class="charsRemaining">You have 45 characters left</div>
 <script>
        jQuery.noConflict();
        jQuery(document).ready(function () {
            jQuery('.ecp-wishlist-description').each(function(){
                var max = parseInt(jQuery(this).attr('maxlength')); 
                jQuery(this).parent().find('.charsRemaining').html('You have ' + (max - jQuery(this).val().length) + ' characters left');
            });
            jQuery('textarea[maxlength]').keyup(function () {
                var max = parseInt(jQuery(this).attr('maxlength'));                
                if (jQuery(this).val().length > max) {
                    jQuery(this).val(jQuery(this).val().substr(0, jQuery(this).attr('maxlength')));
                }

                jQuery(this).parent().find('.charsRemaining').html('You have ' + (max - jQuery(this).val().length) + ' characters left');
            });
        });

    </script>
</td>

<td  class="table-qty a-center">
        <div class="minus_icon" <?php if($item->getProduct()->getTypeId() == 'customproduct') echo 'style="display:none;"'; ?>>
        <button onclick="plusMinusToWishlist('#qtyid_<?php echo $item->getId() ?>', -1 )" class="glyphicon glyphicon-menu-left" title="Update Shopping Cart" value="update_qty" name="update_cart_action" type="button"></button>
        </div>
        <div class="qty-wrap">
            <input  data-item-id="<?php echo $item->getId() ?>" 
            	id="qtyid_<?php echo $item->getId() ?>" name="cart[<?php echo $item->getId() ?>][qty]" 
            	value="<?php echo (int)$item->getQty() ?>" size="4" title="<?php echo $this->__('Qty') ?>" class="input-text qty" maxlength="12" <?php if($item->getProduct()->getTypeId()== 'customproduct') echo 'readonly="readonly"'; ?> />
        </div>
        <div class="plus_icon" <?php if($item->getProduct()->getTypeId()== 'customproduct') echo 'style="display:none;"'; ?>>
        <button onclick="plusMinusToWishlist('#qtyid_<?php echo $item->getId() ?>', 1 )" class="glyphicon glyphicon-menu-right" title="Update Shopping Cart" value="update_qty" name="update_cart_action" type="button"></button>
        </div>
    </td>

<td class="mt-wistlists-added-time">

<span class="mt-wishlist-added-at"><?php echo "Added ".date('M d, Y H:i a',strtotime($item->getAddedAt()))?></span>

<?php if(0):?>
<span class="nobr"><?php echo date('m/d/y', strtotime($item->getAddedAt())); ?></span>
<?php endif;?>
