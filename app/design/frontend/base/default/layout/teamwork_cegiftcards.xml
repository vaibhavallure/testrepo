<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <checkout_cart_index>
        <reference name="checkout.cart">
            <block type="core/template" name="teamwork_cegiftcards_giftcard_input" as="teamwork_cegiftcards" before="coupon" template="teamwork_cegiftcards/sales/cart/giftcards.phtml"/>
        </reference>
    </checkout_cart_index>

    <sales_order_view>
        <update handle="teamwork_cegiftcards_add_card_amount_to_order_totals"/>
    </sales_order_view>

    <sales_order_print>
        <update handle="teamwork_cegiftcards_add_card_amount_to_order_totals"/>
    </sales_order_print>

    <sales_guest_view>
        <update handle="teamwork_cegiftcards_add_card_amount_to_order_totals"/>
    </sales_guest_view>

    <sales_guest_print>
        <update handle="teamwork_cegiftcards_add_card_amount_to_order_totals"/>
    </sales_guest_print>

    <sales_email_order_items>
        <update handle="teamwork_cegiftcards_add_card_amount_to_order_totals"/>
    </sales_email_order_items>

    <teamwork_cegiftcards_add_card_amount_to_order_totals>
        <reference name="order_totals">
            <block type="teamwork_cegiftcards/sales_order_view_total" name="teamwork_cegiftcards_sales_order_view_total"/>
        </reference>
    </teamwork_cegiftcards_add_card_amount_to_order_totals>


    <sales_order_invoice>
        <update handle="teamwork_cegiftcards_add_card_amount_to_invoice_totals"/>
    </sales_order_invoice>

    <sales_order_printinvoice>
        <update handle="teamwork_cegiftcards_add_card_amount_to_invoice_totals"/>
    </sales_order_printinvoice>

    <sales_email_order_invoice_items>
        <update handle="teamwork_cegiftcards_add_card_amount_to_invoice_totals"/>
    </sales_email_order_invoice_items>

    <sales_guest_invoice>
        <update handle="teamwork_cegiftcards_add_card_amount_to_invoice_totals"/>
    </sales_guest_invoice>

    <sales_guest_printinvoice>
        <update handle="teamwork_cegiftcards_add_card_amount_to_invoice_totals"/>
    </sales_guest_printinvoice>

    <teamwork_cegiftcards_add_card_amount_to_invoice_totals>
        <reference name="invoice_totals">
            <block type="teamwork_cegiftcards/sales_order_view_total_invoice" name="teamwork_cegiftcards_sales_order_invoice_view_total"/>
        </reference>
    </teamwork_cegiftcards_add_card_amount_to_invoice_totals>

   <sales_order_creditmemo>
        <update handle="teamwork_cegiftcards_add_card_amount_to_creditmemo_totals"/>
    </sales_order_creditmemo>

    <sales_order_printcreditmemo>
        <update handle="teamwork_cegiftcards_add_card_amount_to_creditmemo_totals"/>
    </sales_order_printcreditmemo>

    <sales_email_order_creditmemo_items>
        <update handle="teamwork_cegiftcards_add_card_amount_to_creditmemo_totals"/>
    </sales_email_order_creditmemo_items>

    <sales_guest_creditmemo>
        <update handle="teamwork_cegiftcards_add_card_amount_to_creditmemo_totals"/>
    </sales_guest_creditmemo>

    <sales_guest_printcreditmemo>
        <update handle="teamwork_cegiftcards_add_card_amount_to_creditmemo_totals"/>
    </sales_guest_printcreditmemo>

    <teamwork_cegiftcards_add_card_amount_to_creditmemo_totals>
        <reference name="creditmemo_totals">
            <block type="teamwork_cegiftcards/sales_order_view_total_creditmemo" name="teamwork_cegiftcards_sales_order_creditmemo_view_total"/>
        </reference>
    </teamwork_cegiftcards_add_card_amount_to_creditmemo_totals>


    <PRODUCT_TYPE_teamwork_cegiftcard translate="label">
        <label>Catalog Product View (Giftcard)</label>
        <reference name="product.info">
            <block type="teamwork_cegiftcards/catalog_product_view_type_giftcard" name="product.info.teamwork.cegiftcards" as="product_type_data" template="teamwork_cegiftcards/catalog/product/view/type/giftcard.phtml">
                <!-- <block type="core/text_list" name="product.info.simple.extra" as="product_type_data_extra" translate="label">
                    <label>Product Extra Info</label>
                </block>-->
            </block>
        </reference>
        <reference name="head">
            <action method="addCss"><stylesheet>css/teamwork_cegiftcards.css</stylesheet></action>
        </reference>
    </PRODUCT_TYPE_teamwork_cegiftcard>

     <checkout_cart_index>
        <reference name="checkout.cart">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/checkout_cart_item_renderer</block>
                <template>checkout/cart/item/default.phtml</template>
            </action>
        </reference>
    </checkout_cart_index>

    <checkout_onepage_review>
        <reference name="root">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/checkout_cart_item_renderer</block>
                <template>checkout/onepage/review/item.phtml</template>
            </action>
        </reference>
    </checkout_onepage_review>

    <checkout_multishipping_addresses>
        <reference name="checkout_addresses">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/checkout_cart_item_renderer</block>
                <template>checkout/multishipping/item/default.phtml</template>
            </action>
        </reference>
    </checkout_multishipping_addresses>

    <checkout_multishipping_shipping>
        <reference name="checkout_shipping">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/checkout_cart_item_renderer</block>
                <template>checkout/multishipping/item/default.phtml</template>
            </action>
        </reference>
        <reference name="checkout_billing_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/checkout_cart_item_renderer</block>
                <template>checkout/multishipping/item/default.phtml</template>
            </action>
        </reference>
    </checkout_multishipping_shipping>

    <checkout_multishipping_overview>
        <reference name="checkout_overview">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/checkout_cart_item_renderer</block>
                <template>checkout/multishipping/item/default.phtml</template>
            </action>
        </reference>
    </checkout_multishipping_overview>

    <paypal_express_review>
        <reference name="paypal.express.review.details">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/checkout_cart_item_renderer</block>
                <template>checkout/onepage/review/item.phtml</template>
            </action>
        </reference>
    </paypal_express_review>
    <paypal_express_review_details>
        <reference name="root">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/checkout_cart_item_renderer</block>
                <template>checkout/onepage/review/item.phtml</template>
            </action>
        </reference>
    </paypal_express_review_details>


    <sales_order_view>
        <reference name="order_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer</block>
                <template>sales/order/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_order_view>

    <sales_order_invoice>
        <reference name="invoice_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer</block>
                <template>sales/order/invoice/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_order_invoice>

    <sales_order_shipment>
        <reference name="shipment_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer</block>
                <template>sales/order/shipment/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_order_shipment>

    <sales_order_creditmemo>
        <reference name="creditmemo_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer</block>
                <template>sales/order/creditmemo/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_order_creditmemo>

    <sales_order_print>
        <reference name="sales.order.print">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>sales/order/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_order_print>

    <sales_order_printinvoice>
        <reference name="sales.order.print.invoice">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>sales/order/invoice/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_order_printinvoice>

    <sales_order_printshipment>
        <reference name="sales.order.print.shipment">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>sales/order/shipment/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_order_printshipment>

    <sales_order_printcreditmemo>
        <reference name="sales.order.print.creditmemo">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>sales/order/creditmemo/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_order_printcreditmemo>

    <sales_guest_view>
        <reference name="order_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer</block>
                <template>sales/order/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_guest_view>

    <sales_guest_invoice>
        <reference name="invoice_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer</block>
                <template>sales/order/invoice/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_guest_invoice>

    <sales_guest_shipment>
        <reference name="shipment_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer</block>
                <template>sales/order/shipment/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_guest_shipment>

    <sales_guest_creditmemo>
        <reference name="creditmemo_items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer</block>
                <template>sales/order/creditmemo/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_guest_creditmemo>

    <sales_guest_print>
        <reference name="sales.order.print">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>sales/order/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_guest_print>

    <sales_guest_printinvoice>
        <reference name="sales.order.print.invoice">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>sales/order/invoice/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_guest_printinvoice>

    <sales_guest_printshipment>
        <reference name="sales.order.print.shipment">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>sales/order/shipment/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_guest_printshipment>

    <sales_guest_printcreditmemo>
        <reference name="sales.order.print.creditmemo">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>sales/order/creditmemo/items/renderer/default.phtml</template>
            </action>
        </reference>
    </sales_guest_printcreditmemo>

    <sales_email_order_items>
        <reference name="items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>email/order/items/order/default.phtml</template>
            </action>
        </reference>
    </sales_email_order_items>

    <sales_email_order_invoice_items>
        <reference name="items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>email/order/items/invoice/default.phtml</template>
            </action>
        </reference>
    </sales_email_order_invoice_items>

    <sales_email_order_shipment_items>
        <reference name="items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>email/order/items/shipment/default.phtml</template>
            </action>
        </reference>
    </sales_email_order_shipment_items>

    <sales_email_order_creditmemo_items>
        <reference name="items">
            <action method="addItemRender">
                <type>teamwork_cegiftcard</type>
                <block>teamwork_cegiftcards/sales_order_item_renderer_noquote</block>
                <template>email/order/items/creditmemo/default.phtml</template>
            </action>
        </reference>
    </sales_email_order_creditmemo_items>

</layout>
