<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     default_modern
 * @copyright   Copyright (c) 2011 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<form id="search_mini_form" action="<?php echo $this->helper('catalogsearch')->getResultUrl() ?>" method="get">
    <div class="form-search">
        <!-- <label for="search"><//?php echo $this->__('Search') ?></label> -->
        <div id="search-input" class="position-relative" style="display:none;">
          <input class="input-text" id="search" placeholder="Search" width="17px" src="<?php echo $this->getSkinUrl('images/redesign/nav-search.png'); ?>" type="text" name="<?php echo $this->helper('catalogsearch')->getQueryParamName() ?>" value="<?php echo $this->helper('catalogsearch')->getEscapedQueryText() ?>"/>
          <img class="position-absolute" id="cross-icon" src="<?php echo $this->getSkinUrl('images/redesign/exit-small-wt.png'); ?>" alt="x">
        </div>
        <img width="17px" id="search-icon" src="<?php echo $this->getSkinUrl('images/redesign/nav-search.png'); ?>" alt="Search">
        <div id="search_autocomplete" class="search-autocomplete"></div>
        <script type="text/javascript">
        //<![CDATA[
            var searchForm = new Varien.searchForm('search_mini_form', 'search', '<?php echo Mage::getStoreConfig('ecp_searchbox/searchbox/instructional_text')?>');
            searchForm.initAutocomplete('<?php echo $this->helper('catalogsearch')->getSuggestUrl() ?>', 'search_autocomplete');
        //]]>
        </script>
        <script>
            jQuery(document).ready(function(){              
              if(jQuery('body').hasClass('mobile-device')) {
                jQuery("#cross-icon").hide();
                let crossIconObj = jQuery('#cross-icon');
                jQuery('#search-input').after(crossIconObj)
                jQuery(crossIconObj).removeClass('position-absolute')
                jQuery(crossIconObj).css('margin-top','6px')
              }

              jQuery("#search-icon").click(function(){
                if(jQuery('body').hasClass('mobile-device')) {
                  jQuery("#cross-icon").show();
                }
                
                jQuery(this).hide();

                  if (jQuery(window).width() <= 1440) {
                      jQuery("ul.allure-menu").addClass("search-active");
                        }
                  jQuery("#search-input").show();
                  jQuery("#search").focus();
              });

            jQuery("#cross-icon").click(function(){
              if(jQuery('body').hasClass('mobile-device')) {
                jQuery("#cross-icon").hide();
              }
                if (jQuery(window).width() <= 1440) {
                    jQuery("ul.allure-menu").removeClass("search-active");
                }
                jQuery('#search_autocomplete').hide();
                jQuery("#search-input").hide(500);
              jQuery("#search-icon").show();
            });
});
        </script>
    </div>
</form>
