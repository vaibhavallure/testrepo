<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php /* @var $this Mage_ProductAlert_Block_Product_View */?>

    <?php if(1 == 0): ?>
        <p class="<?php echo $this->getHtmlClass() ?>">
            <a href="<?php echo $this->escapeHtml($this->getSignupUrl()) ?>" title="<?php echo $this->escapeHtml($this->__($this->getSignupLabel())); ?>"><?php echo $this->escapeHtml($this->__($this->getSignupLabel())); ?></a>
        </p>
    <?php else: ?>
        <div>
            <a class="sign-up-in-stock" title="<?php echo $this->escapeHtml($this->__($this->getSignupLabel())); ?>" style="cursor: pointer">
                <?php echo $this->escapeHtml($this->__($this->getSignupLabel())); ?>
            </a>
            <div class="sign-up-email-panel mt-2 row" style="display:none;">
                <!--<div class="content-email-panel" style="display: block; width: 100%; height: 20px">
                    <div class="close close-tooltip" style="width:25px; font-size: 9px; display: block; float:right; cursor: pointer">Close</div>
                </div>-->
                <!--<form action="" name="non-loged-signup" method="post" id="non-loged-signup">-->
                <div class="form-group input-form w-100">
                    <input type="text" value="" style="display:none"/>
                    <input type="text" id="email" name="email" class="ele_width form-control required-entry text emailToNotification w-100 mb-3"/>
                </div>
                <div class="col-12 p-0">
                <button type="button" class="button dark-button pop-up-button text-uppercase alert-signup-button" style="height: 42px;" onclick="sendEmailToNotification('<?php echo Mage::getUrl("ecpalertstock/index/saveEmailForStockAlert") ?>',<?php echo Mage::registry('current_product')->getData('entity_id')?>,jQuery('.emailToNotification').val());">
                        <span>Signup</span>
                    </button>
                </div>
                <!--</form>-->
            </div>
        </div>
    <?php endif; ?>
        <div class="validation-advice ajax-error-messages showMessages" style="display:none"></div>
<script type="text/javascript">
    jQuery.noConflict();

    jQuery("sign-up-in-stock")

//    var productAddToCartForm = new VarienForm('product_addtocart_form');
//    productAddToCartForm.submit = function(button, form) {
//        if (this.validator.validate()) {
//
//        }
//    }
    new Varien.searchForm('product_addtocart_form', 'email', '<?php echo (Mage::getSingleton('customer/session')->isLoggedIn()) ? Mage::getSingleton('customer/session')->getCustomer()->getEmail() : $this->__('Email') ?>');

    jQuery('.showMessages').hide();
//    (function($) {
//        $.extend(Tipped.Skins, {
//            'customTiny' : $.extend(true, { }, Tipped.Skins.tiny, {
//                background: {
//                        color: [
//                        { position: 0, color: '#FFF'}
//                        ],
//                        opacity: .9
//                },
//                radius: { size: 0, position: 'border' }/*,
//                closeButton: true*/
//            })
//        });
//    })(jQuery);

   /* jQuery(document).ready(function(){
            Tipped.create(jQuery(".sign-up-in-stock"), jQuery(".sign-up-email-panel")[0], {
                skin: 'dark',
                showOn: 'click',
                hideOn: 'click'
            });
    });*/

   jQuery(".sign-up-in-stock").on("click",function () {
      jQuery('.sign-up-email-panel').slideToggle();
   });
</script>
