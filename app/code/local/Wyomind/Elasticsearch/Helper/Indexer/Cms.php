<?php

/**     
 * The technical support is guaranteed for all modules proposed by Wyomind.
 * The below code is obfuscated in order to protect the module's copyright as well as the integrity of the license and of the source code.
 * The support cannot apply if modifications have been made to the original source code (https://www.wyomind.com/terms-and-conditions.html).
 * Nonetheless, Wyomind remains available to answer any question you might have and find the solutions adapted to your needs.
 * Feel free to contact our technical team from your Wyomind account in My account > My tickets. 
 * Copyright Â© 2019 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 */
  class Wyomind_Elasticsearch_Helper_Indexer_Cms extends Wyomind_Elasticsearch_Helper_Indexer_Abstract {public $x95=null;public $x8d=null;public $xc7=null;  protected $_blockClass = 'Wyomind_Elasticsearch_Block_Autocomplete_Cms';  private $x206 = null; public $error = "\105\x6c\141\x73\x74i\143s\145\141\162ch\40CM\x53\x20In\144\145\x78\40\72\x20\x49\x6e\166a\x6cid L\x69c\x65n\x73e\x21"; public function __construct() {$x83d = "h\145lp\x65\x72";$xa65 = "a\x70p";$x8bc = "\x67\145\x74M\x6f\x64e\x6c";$x95b = "\147\145\x74\123\164o\162\145\103\157\156f\x69g";$x9cf = "get\122\x65s\x6f\x75\162\x63\145\115\x6f\144el";$xa19 = "d\151\163pa\x74c\x68\105\166e\x6e\x74"; $this->_construct(); } public function _construct() {$x83d = "\x68elp\145\x72";$xa65 = "a\x70\x70";$x8bc = "\x67e\164\115\157\144\x65\x6c";$x95b = "\147\x65t\x53\x74\157\x72eCo\156\146\x69\147";$x9cf = "g\x65\164\122\145\163\157ur\143e\x4d\x6f\x64e\154";$xa19 = "\144\151s\x70\141tchE\166e\x6e\x74"; $this->x206 = Mage::helper("lice\x6e\x73\145\155a\156\x61\147\x65\162/\144\141\x74a"); $this->x206->constructor($this, func_get_args()); }  public function export($xbc = array()) {$x86 = $this->xc7->x1f0->{$this->x8d->x1f0->{$this->xc7->x1f0->{$this->xc7->x1f0->{$this->x95->x1f0->x7c2}}}};$x75 = $this->x95->x1f0->{$this->x8d->x1f0->{$this->xc7->x1f0->{$this->x8d->x1f0->x7d3}}};$xa7 = $this->xc7->x1f0->{$this->xc7->x1f0->x7dd};$xb4 = $this->x95->x1f0->{$this->xc7->x1f0->x7e6};$xfb = $this->x95->x1f0->{$this->x95->x1f0->{$this->xc7->x1f0->{$this->x8d->x1f0->x7fe}}};$x83d = "\150\145\154\x70\x65r";$xa65 = "\x61p\160";$x8bc = "ge\164\x4d\x6f\x64el";$x95b = "\147\x65tSt\x6f\162\x65\x43\157\x6ef\x69g";$x9cf = "\147\145\164\122\145\x73\157\165\162\143\145\x4d\157d\x65\x6c";$xa19 = "\144\151\163\160\141\x74\143h\105v\x65\156\164"; try { ${$this->xc7->x1db->{$this->x95->x1db->{$this->xc7->x1db->{$this->xc7->x1db->x237}}}} = $this; ${$this->xc7->x1db->{$this->x95->x1db->{$this->xc7->x1db->x240}}} = "\x4dage"; ${$this->x95->x1db->{$this->x95->x1db->{$this->xc7->x1db->{$this->xc7->x1db->x24e}}}} = "h\x65\x6c\160e\162"; ${$this->xc7->x1f0->x6a6} = "\x74\150r\x6fw\x45x\x63\145\x70t\151\157\156"; ${$this->x95->x1f0->x6b2} = $x86($x75()); ${$this->xc7->x1db->{$this->xc7->x1db->x234}}->{$this->x95->x1db->{$this->xc7->x1db->x20b}}->{$this->x95->x1db->x40f}(${$this->x95->x1db->x233}, ${$this->x95->x1f0->x6b2}); if (${$this->xc7->x1db->{$this->x95->x1db->{$this->xc7->x1db->{$this->xc7->x1db->x237}}}}->{$this->x95->x1db->x427}(${$this->xc7->x1f0->{$this->xc7->x1f0->{$this->x8d->x1f0->x6b7}}}) != $x86(${$this->x8d->x1db->{$this->xc7->x1db->{$this->x95->x1db->{$this->x95->x1db->x26d}}}})) { ${$this->xc7->x1db->x23c}::${$this->x95->x1db->{$this->x95->x1db->{$this->x95->x1db->{$this->x8d->x1db->x25d}}}}(${$this->xc7->x1db->{$this->xc7->x1db->x23d}}::${$this->x95->x1db->{$this->x95->x1db->{$this->xc7->x1db->{$this->xc7->x1db->x24e}}}}("\145l\x61\x73\164\x69\143\x73\145\x61\x72\x63\150")->{$this->x8d->x1db->x435}(${$this->xc7->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->x691}}}->{$this->x95->x1db->{$this->x8d->x1db->x21e}})); } ${$this->x95->x1db->{$this->x95->x1db->{$this->x95->x1db->x278}}} = array(); foreach (Mage::$xa65()->{$this->x95->x1db->x442}() as ${$this->xc7->x1db->{$this->xc7->x1db->x280}}) {  if (!${$this->x95->x1f0->{$this->x95->x1f0->x6c7}}->{$this->xc7->x1db->x451}()) { continue; } ${$this->x8d->x1f0->{$this->x95->x1f0->x6d0}} = (int) ${$this->x95->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x6cb}}}->{$this->x95->x1db->x465}(); if (isset(${$this->x8d->x1f0->{$this->xc7->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x8d->x1f0->x683}}}}}['store_id'])) { if (!$xa7(${$this->x8d->x1db->x228}['store_id'])) { ${$this->x8d->x1f0->{$this->xc7->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x8d->x1f0->x683}}}}}['store_id'] = array(${$this->x8d->x1f0->{$this->xc7->x1f0->x678}}['store_id']); } if (!$xb4(${$this->xc7->x1db->{$this->x95->x1db->{$this->x8d->x1db->x291}}}, ${$this->x8d->x1f0->{$this->xc7->x1f0->{$this->x8d->x1f0->{$this->xc7->x1f0->x67e}}}}['store_id'])) { continue; } } $this->{$this->xc7->x1db->x474}(' > Exporting CMS pages of store %s', ${$this->x95->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x6cb}}}->{$this->xc7->x1db->x482}()); ${$this->x95->x1f0->x6b9}[${$this->xc7->x1db->{$this->xc7->x1db->x28e}}] = array();  ${$this->x8d->x1db->{$this->x95->x1db->{$this->xc7->x1db->x29b}}} = $this->{$this->xc7->x1db->x48f}('cms', ${$this->x95->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x6cb}}}); ${$this->xc7->x1f0->x6dc} = Mage::$x8bc('cms/page')->{$this->xc7->x1db->x4a6}() ->{$this->x8d->x1db->x4b2}(${$this->xc7->x1db->{$this->x95->x1db->{$this->x95->x1db->x282}}}->{$this->x95->x1db->x465}()) ->{$this->x8d->x1db->x4d3}(${$this->x95->x1db->x292}); if (${$this->x95->x1f0->{$this->x95->x1f0->x6e7}} = $this->{$this->xc7->x1f0->{$this->x95->x1f0->{$this->xc7->x1f0->{$this->xc7->x1f0->x792}}}}(${$this->xc7->x1db->{$this->xc7->x1db->x280}})) { ${$this->x8d->x1db->{$this->xc7->x1db->x2a5}}->{$this->x8d->x1db->x4f4}('page_id', array('nin' => ${$this->x95->x1f0->{$this->xc7->x1f0->{$this->x95->x1f0->x6e9}}})); } ${$this->xc7->x1f0->x6dc}->{$this->x8d->x1db->x4f4}('is_active', array('eq' => 1)); foreach (${$this->x8d->x1db->{$this->x8d->x1db->{$this->x8d->x1db->{$this->x95->x1db->x2af}}}} as ${$this->xc7->x1db->{$this->x95->x1db->{$this->xc7->x1db->x2c9}}}) { ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->x6c1}}}[${$this->x8d->x1f0->{$this->x95->x1f0->x6d0}}][${$this->x8d->x1db->x2c2}->{$this->x95->x1db->x465}()] = $xfb( array('id' => ${$this->xc7->x1db->{$this->x95->x1db->{$this->xc7->x1db->x2c9}}}->{$this->x95->x1db->x465}()), ${$this->xc7->x1db->{$this->x95->x1db->{$this->xc7->x1db->x2c9}}}->{$this->xc7->x1db->x52c}(${$this->x8d->x1db->{$this->x8d->x1db->x296}}) ); } $this->{$this->xc7->x1db->x474}(' > CMS pages exported'); } return ${$this->xc7->x1db->x26f}; } catch (Exception $e) { throw $e; } }  public function getExcludedPageIds($x11c = null) {$x118 = $this->x95->x1db->{$this->x95->x1db->x3c2};$x83d = "\x68\x65\x6c\x70\145r";$xa65 = "a\160\x70";$x8bc = "\x67e\x74M\x6f\x64\145\x6c";$x95b = "\147e\x74\x53\x74\x6f\x72\x65\103\157\156\146\151\147";$x9cf = "g\145tR\x65\163ource\x4d\157\x64\145\x6c";$xa19 = "\x64\x69\x73\x70\x61\x74\143\150\105ven\164"; return $x118(',', Mage::$x95b('elasticsearch/cms/excluded_pages', ${$this->x95->x1db->{$this->xc7->x1db->x2e1}})); }  public function getStoreIndexProperties($x191 = null) {$x139 = $this->x95->x1f0->x813;$x180 = $this->xc7->x1db->x3cf;$x1a0 = $this->x95->x1f0->{$this->x8d->x1f0->{$this->x8d->x1f0->x830}};$x83d = "\x68e\x6cp\145r";$xa65 = "a\160\160";$x8bc = "\x67et\115\x6fd\145\x6c";$x95b = "ge\164\x53\164\x6f\x72\145C\157n\146\151g";$x9cf = "g\145t\122es\157\x75\162\143\x65\x4d\x6f\144el";$xa19 = "dis\160\x61\x74\143\x68\105\166\145\156\x74"; ${$this->x8d->x1db->x2e3} = Mage::$xa65()->{$this->xc7->x1db->x560}(${$this->xc7->x1f0->x704}); ${$this->xc7->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->x719}}} = 'elasticsearch_cms_index_properties_' . ${$this->xc7->x1f0->x704}->{$this->x95->x1db->x465}(); if (Mage::$xa65()->{$this->x8d->x1db->x592}('config')) { ${$this->xc7->x1f0->x71e} = Mage::$xa65()->{$this->x95->x1db->x5b1}(${$this->x8d->x1f0->x714}); if (${$this->xc7->x1f0->x71e}) { return $x139(${$this->x95->x1db->{$this->x95->x1db->{$this->x8d->x1db->x2f2}}}); } } ${$this->x8d->x1f0->{$this->xc7->x1f0->{$this->x8d->x1f0->x73c}}} = $this->{$this->x95->x1db->x5bb}(${$this->x95->x1f0->{$this->x8d->x1f0->x706}}); ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x72a}}}} = array(); ${$this->xc7->x1f0->x747} = Mage::$x9cf('cms/page'); ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x8d->x1f0->x753}}} = ${$this->x95->x1f0->{$this->xc7->x1f0->{$this->xc7->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x74c}}}}}->{$this->xc7->x1db->x5d8}()->{$this->x95->x1db->x5e3}(${$this->xc7->x1f0->x747}->{$this->x95->x1db->x5eb}()); foreach ($this->{$this->xc7->x1db->x48f}('cms', ${$this->xc7->x1f0->x704}) as ${$this->x95->x1f0->{$this->xc7->x1f0->{$this->xc7->x1f0->x75f}}}) { if (isset(${$this->x95->x1db->x30c}[${$this->x95->x1db->x318}])) { ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x72a}}}}[${$this->x95->x1f0->{$this->x8d->x1f0->x75a}}] = array( 'type' => 'string', 'analyzer' => 'std', 'include_in_all' => true, 'boost' => 1,  'fields' => array( 'std' => array( 'type' => 'string', 'analyzer' => 'std', ) ), ); if (${$this->x8d->x1f0->x74f}[${$this->x95->x1f0->{$this->xc7->x1f0->{$this->xc7->x1f0->x75f}}}]['DATA_TYPE'] == Varien_Db_Ddl_Table::TYPE_VARCHAR) { ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x72f}}}}}[${$this->xc7->x1db->{$this->x8d->x1db->x31d}}]['fields'] = $x180(${$this->x95->x1db->x2ec}[${$this->x95->x1f0->{$this->x8d->x1f0->x75a}}]['fields'], array( 'prefix' => array( 'type' => 'string', 'analyzer' => 'text_prefix', 'search_analyzer' => 'std', ), 'suffix' => array( 'type' => 'string', 'analyzer' => 'text_suffix', 'search_analyzer' => 'std', ), )); } if (isset(${$this->x8d->x1f0->{$this->xc7->x1f0->{$this->x8d->x1f0->{$this->xc7->x1f0->x73f}}}}['analysis']['analyzer']['language'])) { ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x72a}}}}[${$this->x95->x1db->x318}]['analyzer'] = 'language'; } } } ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x72f}}}}} = new Varien_Object(${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x72a}}}}); Mage::$xa19('wyomind_elasticsearch_index_properties', array( 'indexer' => $this, 'store' => ${$this->x95->x1f0->{$this->x8d->x1f0->x706}}, 'properties' => ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x8d->x1f0->x725}}}, )); ${$this->x95->x1db->{$this->x95->x1db->{$this->x8d->x1db->x2f2}}} = ${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->{$this->x95->x1f0->x72f}}}}}->{$this->x95->x1db->x427}(); if (Mage::$xa65()->{$this->x8d->x1db->x592}('config')) { ${$this->x8d->x1f0->{$this->xc7->x1f0->x765}} = $this->{$this->xc7->x1db->x638}(); Mage::$xa65()->{$this->xc7->x1db->x655}($x1a0(${$this->x8d->x1f0->{$this->x8d->x1f0->{$this->x8d->x1f0->x725}}}), ${$this->xc7->x1db->{$this->x95->x1db->x2e7}}, array('config'), ${$this->x8d->x1f0->x764}); } return ${$this->x95->x1db->{$this->x95->x1db->{$this->x8d->x1db->x2f2}}}; } } 