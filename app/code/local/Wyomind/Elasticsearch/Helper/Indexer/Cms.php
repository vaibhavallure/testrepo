<?php

/**     
 * The technical support is guaranteed for all modules proposed by Wyomind.
 * The below code is obfuscated in order to protect the module's copyright as well as the integrity of the license and of the source code.
 * The support cannot apply if modifications have been made to the original source code (https://www.wyomind.com/terms-and-conditions.html).
 * Nonetheless, Wyomind remains available to answer any question you might have and find the solutions adapted to your needs.
 * Feel free to contact our technical team from your Wyomind account in My account > My tickets. 
 * Copyright Â© 2019 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 */
  class Wyomind_Elasticsearch_Helper_Indexer_Cms extends Wyomind_Elasticsearch_Helper_Indexer_Abstract {public $xec=null;public $xf5=null;public $x9f=null;  protected $_blockClass = 'Wyomind_Elasticsearch_Block_Autocomplete_Cms';  private $x1a4 = null; public $error = "\105la\163\x74\x69c\163\x65\x61\162\143\x68\40\x43M\123\x20\111nd\145\170\x20\72\x20I\156\x76\x61li\x64 \x4c\151c\x65n\x73\145\41"; public function __construct() {$x71a = "\150elp\145\162";$x920 = "\x61\x70\x70";$x790 = "g\145\164M\x6fd\145l";$x830 = "\x67et\x53t\157\162\x65\103\157\x6e\146\x69g";$x8ae = "\x67et\x52\145\x73\x6f\165\x72\x63\x65Mo\144e\x6c";$x8e4 = "\x64i\x73pat\143\x68\x45ve\156\164"; $this->_construct(); } public function _construct() {$x71a = "h\x65l\160e\x72";$x920 = "\x61\x70\160";$x790 = "\147\145\164\115\157\x64e\x6c";$x830 = "\147\x65\x74\123\x74o\162\145\x43\157\156f\x69\x67";$x8ae = "g\x65\x74\122\x65\x73\157\165rce\x4d\x6f\x64\145\x6c";$x8e4 = "\144i\163\160\141\164\x63h\x45\166\145\156\164"; $this->x1a4 = Mage::helper("li\x63en\163\x65\x6da\156a\147\145r/\144\x61\x74\x61"); $this->x1a4->constructor($this, func_get_args()); }  public function export($x80 = array()) {$x6f = $this->xf5->x180->x2e5;$x7e = $this->x9f->x195->x6b9;$xba = $this->xec->x180->{$this->xf5->x180->x301};$x71a = "\150el\160\x65\x72";$x920 = "\x61\160\160";$x790 = "g\x65\164M\x6fde\x6c";$x830 = "g\145t\123t\157\x72\145C\157\156fig";$x8ae = "\x67e\164Re\163\x6f\165\x72ce\115\157d\145\154";$x8e4 = "\x64\151spa\164\x63\x68\x45\x76\145\156t"; try { ${$this->x9f->x180->{$this->x9f->x180->{$this->x9f->x180->{$this->xf5->x180->x1cd}}}} = array(); foreach (Mage::$x920()->{$this->xec->x180->x37e}() as ${$this->xec->x180->{$this->xec->x180->{$this->xec->x180->x1d2}}}) {  if (!${$this->xec->x180->x1cf}->{$this->xf5->x180->x38d}()) { continue; } ${$this->x9f->x180->{$this->x9f->x180->{$this->xec->x180->{$this->xf5->x180->x1e9}}}} = (int) ${$this->x9f->x195->{$this->xec->x195->{$this->xf5->x195->x5c1}}}->{$this->x9f->x180->x39d}(); if (isset(${$this->xf5->x195->{$this->xec->x195->{$this->xf5->x195->{$this->xf5->x195->x5a8}}}}['store_id'])) { if (!$x6f(${$this->xec->x180->{$this->x9f->x180->{$this->xec->x180->{$this->xec->x180->x1c1}}}}['store_id'])) { ${$this->xec->x180->{$this->x9f->x180->{$this->x9f->x180->x1bf}}}['store_id'] = array(${$this->xf5->x195->{$this->xec->x195->{$this->xf5->x195->{$this->xf5->x195->x5a8}}}}['store_id']); } if (!$x7e(${$this->xf5->x195->{$this->x9f->x195->{$this->xec->x195->x5cf}}}, ${$this->xec->x180->{$this->x9f->x180->{$this->xec->x180->{$this->xec->x180->x1c1}}}}['store_id'])) { continue; } } $this->{$this->xf5->x180->x3ae}(' > Exporting CMS pages of store %s', ${$this->x9f->x195->{$this->xec->x195->{$this->xf5->x195->x5c1}}}->{$this->xf5->x180->x3b5}()); ${$this->xec->x195->{$this->xec->x195->x5b1}}[${$this->xf5->x180->x1df}] = array();  ${$this->x9f->x180->{$this->xec->x180->{$this->xec->x180->x1f8}}} = $this->{$this->x9f->x180->x3c8}('cms', ${$this->x9f->x195->{$this->xec->x195->x5bc}}); ${$this->xec->x195->{$this->x9f->x195->x5df}} = Mage::$x790('cms/page')->{$this->xf5->x180->x3ee}() ->{$this->xf5->x180->x3f6}(${$this->x9f->x195->{$this->xec->x195->{$this->xf5->x195->{$this->xf5->x195->{$this->x9f->x195->x5c8}}}}}->{$this->x9f->x180->x39d}()) ->{$this->xf5->x180->x408}(${$this->xec->x195->{$this->x9f->x195->x5d3}}); if (${$this->xf5->x180->x20a} = $this->{$this->xec->x195->x67e}(${$this->xec->x180->{$this->xec->x180->{$this->x9f->x180->{$this->xec->x180->{$this->xec->x180->x1da}}}}})) { ${$this->xec->x195->{$this->xf5->x195->{$this->xf5->x195->x5e0}}}->{$this->xf5->x180->x422}('page_id', array('nin' => ${$this->xf5->x180->{$this->xf5->x180->x20c}})); } ${$this->xec->x195->{$this->xf5->x195->{$this->xf5->x195->x5e0}}}->{$this->xf5->x180->x422}('is_active', array('eq' => 1)); foreach (${$this->xec->x195->{$this->xf5->x195->{$this->xf5->x195->x5e0}}} as ${$this->xec->x195->x5e9}) { ${$this->xec->x195->{$this->xec->x195->x5b1}}[${$this->x9f->x180->{$this->x9f->x180->{$this->xf5->x180->x1e5}}}][${$this->xec->x195->{$this->xf5->x195->{$this->xec->x195->{$this->xf5->x195->x5f4}}}}->{$this->x9f->x180->x39d}()] = $xba( array('id' => ${$this->xec->x195->{$this->x9f->x195->x5ed}}->{$this->x9f->x180->x39d}()), ${$this->xec->x195->{$this->xf5->x195->{$this->xec->x195->{$this->xf5->x195->x5f4}}}}->{$this->x9f->x180->x45d}(${$this->xec->x180->x1f1}) ); } $this->{$this->xf5->x180->x3ae}(' > CMS pages exported'); } return ${$this->xec->x195->x5ac}; } catch (Exception $e) { throw $e; } }  public function getExcludedPageIds($xd7 = null) {$xd5 = $this->x9f->x180->{$this->x9f->x180->x30c};$x71a = "h\145\154\x70\145\162";$x920 = "a\x70\160";$x790 = "g\145\x74\115\157d\145\x6c";$x830 = "\x67\x65tS\x74\x6fr\145C\x6f\156\x66i\147";$x8ae = "\x67\x65\x74\x52esou\x72c\145\x4d\x6f\x64\x65\154";$x8e4 = "\x64\x69s\x70\x61\x74\x63h\105\x76\x65n\x74"; return $xd5(',', Mage::$x830('elasticsearch/cms/excluded_pages', ${$this->x9f->x180->x225})); }  public function getStoreIndexProperties($x13a = null) {$xf0 = $this->x9f->x195->x6e2;$x120 = $this->x9f->x180->{$this->xec->x180->x322};$x144 = $this->x9f->x180->{$this->x9f->x180->{$this->xec->x180->x338}};$x71a = "h\145\x6c\160\145\x72";$x920 = "a\x70\160";$x790 = "\x67\145\164\x4d\x6fd\145l";$x830 = "g\145\x74\x53\164\157\x72e\103\157nf\151\x67";$x8ae = "g\x65\x74\x52e\163\x6fur\143\x65\115\157\144\145l";$x8e4 = "\144\151\163\160\141\x74ch\x45\x76\x65n\x74"; ${$this->xf5->x195->{$this->xec->x195->x615}} = Mage::$x920()->{$this->xf5->x180->x4a2}(${$this->x9f->x180->x234}); ${$this->x9f->x195->{$this->x9f->x195->x61b}} = 'elasticsearch_cms_index_properties_' . ${$this->xf5->x195->{$this->xf5->x195->{$this->xf5->x195->{$this->x9f->x195->x618}}}}->{$this->x9f->x180->x39d}(); if (Mage::$x920()->{$this->x9f->x180->x4c9}('config')) { ${$this->x9f->x180->{$this->x9f->x180->{$this->x9f->x180->x25d}}} = Mage::$x920()->{$this->xec->x180->x4d9}(${$this->x9f->x180->{$this->xf5->x180->x248}}); if (${$this->x9f->x180->{$this->x9f->x180->{$this->x9f->x180->{$this->xf5->x180->x261}}}}) { return $xf0(${$this->xf5->x195->{$this->x9f->x195->x622}}); } } ${$this->xec->x180->{$this->x9f->x180->x268}} = $this->{$this->xec->x180->x4e7}(${$this->xf5->x180->{$this->xf5->x180->{$this->x9f->x180->{$this->x9f->x180->x241}}}}); ${$this->xf5->x195->{$this->x9f->x195->x622}} = array(); ${$this->x9f->x195->{$this->xec->x195->{$this->xf5->x195->{$this->xec->x195->x63a}}}} = Mage::$x8ae('cms/page'); ${$this->xf5->x195->{$this->x9f->x195->{$this->xec->x195->x646}}} = ${$this->xf5->x180->{$this->xf5->x180->x26f}}->{$this->xf5->x180->x509}()->{$this->x9f->x180->x514}(${$this->xec->x195->x633}->{$this->xf5->x180->x520}()); foreach ($this->{$this->x9f->x180->x3c8}('cms', ${$this->xf5->x180->{$this->xec->x180->x239}}) as ${$this->xec->x195->{$this->x9f->x195->{$this->xec->x195->x64e}}}) { if (isset(${$this->xec->x180->{$this->x9f->x180->x277}}[${$this->x9f->x180->{$this->xec->x180->{$this->xf5->x180->{$this->x9f->x180->{$this->x9f->x180->x287}}}}}])) { ${$this->x9f->x180->{$this->x9f->x180->x258}}[${$this->xec->x195->{$this->x9f->x195->{$this->xf5->x195->{$this->xec->x195->x652}}}}] = array( 'type' => 'string', 'analyzer' => 'std', 'include_in_all' => true, 'boost' => 1,  'fields' => array( 'std' => array( 'type' => 'string', 'analyzer' => 'std', ) ), ); if (${$this->xf5->x195->{$this->x9f->x195->{$this->xf5->x195->{$this->x9f->x195->x647}}}}[${$this->xec->x195->{$this->x9f->x195->{$this->xec->x195->x64e}}}]['DATA_TYPE'] == Varien_Db_Ddl_Table::TYPE_VARCHAR) { ${$this->x9f->x180->{$this->x9f->x180->x258}}[${$this->xec->x195->{$this->x9f->x195->x64a}}]['fields'] = $x120(${$this->x9f->x180->{$this->x9f->x180->{$this->x9f->x180->{$this->xf5->x180->x261}}}}[${$this->x9f->x180->{$this->xec->x180->{$this->xf5->x180->x284}}}]['fields'], array( 'prefix' => array( 'type' => 'string', 'analyzer' => 'text_prefix', 'search_analyzer' => 'std', ), 'suffix' => array( 'type' => 'string', 'analyzer' => 'text_suffix', 'search_analyzer' => 'std', ), )); } if (isset(${$this->x9f->x180->x263}['analysis']['analyzer']['language'])) { ${$this->xec->x195->x620}[${$this->x9f->x180->{$this->x9f->x180->x27f}}]['analyzer'] = 'language'; } } } ${$this->x9f->x180->{$this->x9f->x180->x258}} = new Varien_Object(${$this->x9f->x180->{$this->x9f->x180->{$this->x9f->x180->x25d}}}); Mage::$x8e4('wyomind_elasticsearch_index_properties', array( 'indexer' => $this, 'store' => ${$this->xf5->x180->{$this->xec->x180->x239}}, 'properties' => ${$this->x9f->x180->{$this->x9f->x180->x258}}, )); ${$this->x9f->x180->{$this->x9f->x180->x258}} = ${$this->xec->x195->x620}->{$this->xec->x180->x53c}(); if (Mage::$x920()->{$this->x9f->x180->x4c9}('config')) { ${$this->xf5->x195->x656} = $this->{$this->x9f->x180->x55e}(); Mage::$x920()->{$this->xec->x180->x574}($x144(${$this->xf5->x195->{$this->x9f->x195->x622}}), ${$this->x9f->x180->{$this->x9f->x180->{$this->x9f->x180->{$this->xf5->x180->x24f}}}}, array('config'), ${$this->xec->x195->{$this->xf5->x195->{$this->xf5->x195->x65a}}}); } return ${$this->x9f->x180->{$this->x9f->x180->x258}}; } } 
