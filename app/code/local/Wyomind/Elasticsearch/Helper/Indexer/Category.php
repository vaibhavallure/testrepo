<?php

/**     
 * The technical support is guaranteed for all modules proposed by Wyomind.
 * The below code is obfuscated in order to protect the module's copyright as well as the integrity of the license and of the source code.
 * The support cannot apply if modifications have been made to the original source code (https://www.wyomind.com/terms-and-conditions.html).
 * Nonetheless, Wyomind remains available to answer any question you might have and find the solutions adapted to your needs.
 * Feel free to contact our technical team from your Wyomind account in My account > My tickets. 
 * Copyright Â© 2019 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 */
  class Wyomind_Elasticsearch_Helper_Indexer_Category extends Wyomind_Elasticsearch_Helper_Indexer_Abstract {public $xec=null;public $xf5=null;public $x9f=null;  protected $_searchableAttributes;  protected $_categoriesWithPathNames = array();  protected $_blockClass = 'Wyomind_Elasticsearch_Block_Autocomplete_Category';  private $x563d = null; public $error = "E\x6c\141\x73\164i\143\163ea\162\x63\x68\40\x43\x61te\147\x6f\162\x79\40\x49n\144\145\170 \72\40Inva\x6ci\144 \114\151\x63e\156se!"; public function __construct() {$x6a38 = "\150\145\154p\x65\162";$x6d7f = "\x61\x70\160";$x6dae = "\147et\115\157\x64\x65\x6c";$x6b66 = "\x67\x65\164St\x6f\162\x65\x43\x6fnfi\147";$x6c35 = "\147\145t\x52\145\163\x6furc\145\115\157\x64el";$x6d16 = "\x64is\160\141tchE\x76\x65n\x74"; $this->_construct(); } public function _construct() {$x6a38 = "\x68\x65\154\160\x65r";$x6d7f = "\x61\160\x70";$x6dae = "g\x65\x74\115o\144\145\154";$x6b66 = "\x67\145\164\x53\x74\x6fr\x65\x43o\x6e\x66\151\x67";$x6c35 = "\x67et\122eso\x75r\143\145Mo\144\145\154";$x6d16 = "d\151s\160a\x74\143\150\x45\166\x65\156\164"; $this->x563d = Mage::helper("l\151c\145\156\163\x65\x6d\x61\156a\147\x65r\57\144\x61t\141"); $this->x563d->constructor($this, func_get_args()); }  public function export($x544c = array()) {$x5436 = $this->xf5->x561f->{$this->xec->x561f->{$this->x9f->x561f->{$this->x9f->x561f->{$this->xf5->x561f->x610c}}}};$x5445 = $this->x9f->x561f->{$this->xf5->x561f->{$this->x9f->x561f->{$this->xec->x561f->{$this->xf5->x561f->x6118}}}};$x5499 = $this->x9f->x5630->{$this->xec->x5630->x6942};$x941 = $this->xf5->x561f->{$this->x9f->x561f->x6132};$xf2e = $this->xf5->x55ee->x58fb;$x9ed = $this->xf5->x55ee->{$this->xec->x55ee->{$this->x9f->x55ee->{$this->xec->x55ee->x5913}}};$xd25 = $this->x9f->x5630->{$this->xf5->x5630->{$this->xf5->x5630->x6969}};$xa72 = $this->x9f->x55ee->{$this->xf5->x55ee->{$this->xf5->x55ee->x592a}};$xaa1 = $this->xec->x5630->{$this->x9f->x5630->x697c};$xb55 = $this->xec->x55ee->{$this->x9f->x55ee->{$this->x9f->x55ee->x5945}};$xcdc = $this->xec->x5630->x6991;$xd24 = $this->x9f->x561f->x619b;$xeb5 = $this->xf5->x5630->{$this->xf5->x5630->{$this->xec->x5630->{$this->xec->x5630->{$this->xf5->x5630->x69bf}}}};$xf47 = $this->xec->x55ee->{$this->xec->x55ee->{$this->x9f->x55ee->x5984}};$x6a38 = "\x68\145\154\160\145r";$x6d7f = "\141\x70\160";$x6dae = "\x67\145\164\115\x6f\144\145\154";$x6b66 = "\x67\x65\164S\x74o\162\145\103o\x6efi\147";$x6c35 = "g\x65\x74\x52esou\162c\145M\x6f\144\x65l";$x6d16 = "d\151s\160\x61\x74\x63hEven\164"; try { ${$this->x9f->x561f->x5f1f} = array(); ${$this->xf5->x55ee->{$this->x9f->x55ee->{$this->x9f->x55ee->x56ea}}} = Mage::$x6d7f()->{$this->xf5->x55ee->x5a12}(); foreach (Mage::$x6d7f()->{$this->xec->x55ee->x5a2c}() as ${$this->xf5->x561f->{$this->xf5->x561f->{$this->xf5->x561f->x5f37}}}) {  if (!${$this->xec->x5630->x673a}->{$this->xec->x55ee->x5a3b}()) { continue; } Mage::$x6d7f()->{$this->xec->x55ee->x5a58}(${$this->xec->x55ee->{$this->xf5->x55ee->x56f3}}); ${$this->xec->x5630->{$this->xf5->x5630->{$this->xec->x5630->x674d}}} = (int) ${$this->xec->x561f->x5f32}->{$this->x9f->x55ee->x5a68}(); if (isset(${$this->x9f->x5630->{$this->x9f->x5630->{$this->x9f->x5630->{$this->xf5->x5630->x6724}}}}['store_id'])) { if (!$x5436(${$this->xf5->x561f->{$this->xec->x561f->x5f19}}['store_id'])) { ${$this->x9f->x55ee->{$this->xec->x55ee->{$this->xec->x55ee->{$this->xf5->x55ee->x56d7}}}}['store_id'] = array(${$this->x9f->x55ee->{$this->xec->x55ee->{$this->xec->x55ee->{$this->xf5->x55ee->x56d7}}}}['store_id']); } if (!$x5445(${$this->xf5->x561f->{$this->xf5->x561f->x5f3e}}, ${$this->xf5->x5630->x671d}['store_id'])) { continue; } } $this->{$this->x9f->x55ee->x5a79}(' > Exporting categories of store %s', ${$this->xf5->x55ee->x56ef}->{$this->x9f->x55ee->x5a83}()); ${$this->xec->x561f->{$this->xf5->x561f->{$this->xec->x561f->x5f23}}}[${$this->x9f->x55ee->{$this->x9f->x55ee->{$this->xf5->x55ee->x56fd}}}] = array();  ${$this->x9f->x55ee->{$this->xec->x55ee->{$this->x9f->x55ee->{$this->x9f->x55ee->{$this->x9f->x55ee->x5706}}}}} = $this->{$this->x9f->x55ee->x5a8d}('category', ${$this->xf5->x561f->{$this->x9f->x561f->x5f33}}); ${$this->xf5->x55ee->{$this->xf5->x55ee->x570d}} = Mage::$x6dae('catalog/category')->{$this->xf5->x55ee->x5aa9}(); ${$this->x9f->x5630->{$this->x9f->x5630->{$this->xf5->x5630->x6762}}}->{$this->xf5->x55ee->x5abd}(${$this->xf5->x561f->{$this->x9f->x561f->x5f33}}->{$this->x9f->x55ee->x5a68}()); ${$this->xec->x5630->x6767} = ${$this->xec->x55ee->{$this->xf5->x55ee->x56f3}}->{$this->xec->x55ee->x5ad6}(); ${$this->xec->x561f->{$this->xf5->x561f->x5f4d}}->{$this->xf5->x55ee->x5ae6}() ->{$this->xf5->x55ee->x5aee}(${$this->xec->x5630->{$this->xf5->x5630->x6757}}) ->{$this->x9f->x55ee->x5afb}('path', array('like' => "1/{${$this->xf5->x55ee->x5714}}/%")); ${$this->x9f->x561f->x5f5a} = Mage::$x6b66('elasticsearch/category/not_included_in_menu'); if (!${$this->xf5->x561f->{$this->x9f->x561f->{$this->xec->x561f->{$this->xf5->x561f->x5f63}}}}) { ${$this->x9f->x5630->x675b}->{$this->x9f->x55ee->x5afb}('include_in_menu', array('eq' => 1)); } ${$this->xf5->x55ee->x570b}->{$this->x9f->x55ee->x5b18}(); foreach (${$this->xf5->x55ee->{$this->xf5->x55ee->x570d}} as ${$this->xf5->x55ee->{$this->xec->x55ee->x5726}}) { ${$this->xec->x561f->x5f65}->{$this->xec->x55ee->x5b23}()->{$this->xec->x55ee->x5b2f}(${$this->xf5->x5630->{$this->xec->x5630->x673e}}); ${$this->xf5->x5630->x6727}[${$this->xf5->x561f->{$this->xec->x561f->{$this->x9f->x561f->{$this->x9f->x561f->x5f44}}}}][${$this->x9f->x561f->{$this->xec->x561f->{$this->x9f->x561f->{$this->xec->x561f->x5f6d}}}}->{$this->x9f->x55ee->x5a68}()] = $x5499( array( 'id' => ${$this->x9f->x55ee->x5722}->{$this->x9f->x55ee->x5a68}(), '_url' => ${$this->x9f->x561f->{$this->xec->x561f->{$this->xec->x561f->x5f6c}}}->{$this->xec->x55ee->x5b5b}(), '_path' => $this->{$this->xec->x55ee->{$this->xec->x55ee->{$this->x9f->x55ee->x58b0}}}(${$this->xec->x561f->x5f65}), ), ${$this->x9f->x561f->{$this->xec->x561f->{$this->x9f->x561f->{$this->x9f->x561f->{$this->xf5->x561f->x5f71}}}}}->{$this->x9f->x55ee->x5b75}(${$this->x9f->x561f->{$this->x9f->x561f->x5f48}}) ); } $this->{$this->x9f->x55ee->x5a79}(' > Categories exported'); } Mage::$x6d7f()->{$this->xec->x55ee->x5a58}(${$this->x9f->x55ee->x56e4}); return ${$this->x9f->x5630->{$this->x9f->x5630->x6729}}; } catch (Exception $e) { throw $e; } }  public function getSearchableAttributes($x54cd = null) {$x1028 = $this->xec->x55ee->{$this->xf5->x55ee->x59c6};$x6a38 = "\x68\x65\154\160\x65r";$x6d7f = "a\x70\160";$x6dae = "g\x65t\x4dod\145\x6c";$x6b66 = "\x67\x65t\123to\x72\x65\x43o\156\x66\151g";$x6c35 = "\147e\164Re\x73o\x75r\143\145\115o\x64\x65\154";$x6d16 = "\144\x69\163\x70a\164ch\105ve\x6e\x74"; if (null === $this->{$this->x9f->x55ee->{$this->x9f->x55ee->{$this->xf5->x55ee->x565c}}}) { $this->{$this->x9f->x55ee->{$this->x9f->x55ee->{$this->xec->x55ee->{$this->xec->x55ee->x565e}}}} = array(); ${$this->xf5->x561f->{$this->xec->x561f->x5ffb}} = $this->{$this->xec->x55ee->x5bbe}()->{$this->x9f->x55ee->x5bcb}('catalog_category'); ${$this->xec->x561f->x5ffd} = ${$this->xf5->x55ee->{$this->xec->x55ee->{$this->xec->x55ee->x57c4}}}->{$this->xec->x55ee->x5bdd}();  ${$this->xec->x55ee->{$this->xec->x55ee->{$this->xec->x55ee->{$this->xf5->x55ee->{$this->xec->x55ee->x57dc}}}}} = Mage::$x6c35('catalog/category_attribute_collection') ->{$this->x9f->x55ee->x5bf8}(${$this->xf5->x55ee->{$this->xf5->x55ee->x57c2}}->{$this->xf5->x55ee->x5c07}()) ->{$this->xec->x55ee->x5c0f}('attribute_code', array( 'in' => $this->{$this->x9f->x55ee->x5a8d}('category', ${$this->xf5->x561f->{$this->xec->x561f->{$this->xf5->x561f->{$this->x9f->x561f->{$this->xec->x561f->x5ff5}}}}}) )); ${$this->xec->x55ee->{$this->x9f->x55ee->x57e3}} = ${$this->xec->x55ee->{$this->xec->x55ee->{$this->xf5->x55ee->x57d6}}}->{$this->x9f->x55ee->x5c28}(); foreach (${$this->xf5->x561f->x600b} as ${$this->xf5->x561f->{$this->xf5->x561f->{$this->xf5->x561f->{$this->x9f->x561f->{$this->xec->x561f->x601c}}}}}) {  ${$this->xf5->x561f->{$this->xf5->x561f->{$this->xf5->x561f->{$this->x9f->x561f->{$this->xec->x561f->x601c}}}}}->{$this->xf5->x55ee->x5c37}(${$this->xf5->x5630->x6822}); $this->{$this->x9f->x55ee->{$this->x9f->x55ee->{$this->xf5->x55ee->x565c}}}[${$this->x9f->x5630->{$this->xec->x5630->{$this->xec->x5630->{$this->x9f->x5630->x6858}}}}->{$this->xf5->x55ee->x5c44}()] = ${$this->x9f->x5630->{$this->xec->x5630->{$this->xec->x5630->x6855}}}; } } return $this->{$this->x9f->x55ee->{$this->x9f->x55ee->{$this->xec->x55ee->{$this->xec->x55ee->x565e}}}}; }  public function getStoreIndexProperties($x5543 = null) {$x5507 = $this->xec->x55ee->{$this->x9f->x55ee->x599d};$x120 = $this->xec->x55ee->{$this->xf5->x55ee->x59a6};$x5552 = $this->xf5->x561f->{$this->x9f->x561f->{$this->x9f->x561f->x61e0}};$x10de = $this->x9f->x561f->x61ea;$x6a38 = "he\x6cp\145\x72";$x6d7f = "ap\160";$x6dae = "\x67et\115\x6f\144\145\154";$x6b66 = "\147et\x53\164\157\162\x65\x43\157\156\146ig";$x6c35 = "\147e\x74\122\x65\x73\x6f\x75\162\x63e\115\157d\x65l";$x6d16 = "\144\151s\x70a\x74\143\x68\105ven\164"; ${$this->xf5->x561f->{$this->x9f->x561f->x5f85}} = Mage::$x6d7f()->{$this->xf5->x55ee->x5a12}(${$this->xf5->x5630->x679d}); ${$this->x9f->x5630->{$this->x9f->x5630->x67a7}} = 'elasticsearch_category_index_properties_' . ${$this->xec->x55ee->{$this->xf5->x55ee->{$this->xec->x55ee->x5744}}}->{$this->x9f->x55ee->x5a68}(); if (Mage::$x6d7f()->{$this->x9f->x55ee->x5c9a}('config')) { ${$this->xec->x5630->{$this->xec->x5630->{$this->x9f->x5630->x67b3}}} = Mage::$x6d7f()->{$this->x9f->x55ee->x5cb0}(${$this->xf5->x55ee->{$this->x9f->x55ee->x574d}}); if (${$this->x9f->x5630->x67ae}) { return $x5507(${$this->xec->x55ee->x575a}); } } ${$this->xec->x55ee->{$this->xec->x55ee->x575f}} = array(); ${$this->xf5->x561f->{$this->xf5->x561f->{$this->xec->x561f->{$this->x9f->x561f->{$this->xec->x561f->x5fa5}}}}} = $this->{$this->x9f->x5630->x68fe}(${$this->xec->x55ee->{$this->xf5->x55ee->{$this->xf5->x55ee->{$this->xf5->x55ee->x5747}}}}); foreach (${$this->xf5->x561f->{$this->xf5->x561f->x5f9b}} as ${$this->xf5->x55ee->{$this->xec->x55ee->{$this->xec->x55ee->{$this->x9f->x55ee->{$this->x9f->x55ee->x5783}}}}}) {  ${$this->x9f->x5630->{$this->x9f->x5630->x67d5}} = ${$this->xf5->x55ee->{$this->xec->x55ee->{$this->xec->x55ee->x577d}}}->{$this->xf5->x55ee->x5c44}(); ${$this->xec->x561f->x5fa9}->{$this->x9f->x55ee->x5cda}(true); ${$this->xec->x5630->{$this->xec->x5630->{$this->x9f->x5630->x67b3}}}[${$this->xec->x561f->{$this->xec->x561f->{$this->xf5->x561f->x5fb4}}}] = $this->{$this->xf5->x55ee->x5ced}(${$this->xf5->x55ee->x5776}, ${$this->xf5->x561f->{$this->xf5->x561f->{$this->xec->x561f->x5f8a}}}); }  ${$this->xec->x5630->{$this->x9f->x5630->x67b1}}['_url'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', );  ${$this->xec->x5630->{$this->x9f->x5630->x67b1}}['_path'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', ); ${$this->xec->x5630->{$this->x9f->x5630->x67b1}} = new Varien_Object(${$this->xec->x561f->x5f92}); Mage::$x6d16('wyomind_elasticsearch_index_properties', array( 'indexer' => $this, 'store' => ${$this->xec->x5630->{$this->xec->x5630->{$this->xf5->x5630->x67a2}}}, 'properties' => ${$this->xec->x55ee->{$this->xec->x55ee->x575f}}, )); ${$this->xec->x561f->x5f92} = ${$this->xec->x5630->{$this->x9f->x5630->x67b1}}->{$this->x9f->x55ee->x5d06}(); if (Mage::$x6d7f()->{$this->x9f->x55ee->x5c9a}('config')) { ${$this->xf5->x55ee->x578e} = $this->{$this->xec->x55ee->x5d2e}(); Mage::$x6d7f()->{$this->xec->x55ee->x5d47}($x5552(${$this->xec->x5630->{$this->x9f->x5630->x67b1}}), ${$this->xf5->x55ee->{$this->x9f->x55ee->x574d}}, array('config'), ${$this->x9f->x5630->{$this->xf5->x5630->x67da}}); } return ${$this->xf5->x561f->{$this->xf5->x561f->x5f96}}; }  public function getCategoriesWithPathNames($x559e = null) {$x557c = $this->xf5->x561f->x6206;$x6a38 = "h\145lpe\162";$x6d7f = "\141\x70p";$x6dae = "\x67e\x74\115o\144\145\x6c";$x6b66 = "\147\x65\x74S\x74\x6fre\103\157\x6e\x66\x69\147";$x6c35 = "\x67e\x74R\145s\157u\162\143eM\x6f\144\145l";$x6d16 = "disp\141\x74\x63\x68\x45\166e\x6et"; ${$this->x9f->x55ee->x5801} = Mage::$x6d7f()->{$this->xf5->x55ee->x5a12}(${$this->x9f->x5630->x6868}); if (!isset($this->{$this->x9f->x55ee->{$this->x9f->x55ee->{$this->xec->x55ee->{$this->x9f->x55ee->x56b4}}}}[${$this->xec->x5630->{$this->xec->x5630->{$this->xf5->x5630->x6872}}}->{$this->x9f->x55ee->x5a68}()])) { ${$this->xf5->x5630->{$this->xf5->x5630->x687e}} = Mage::$x6dae('catalog/category')->{$this->xf5->x55ee->x5aa9}() ->{$this->xf5->x55ee->x5aee}('name') ->{$this->xf5->x55ee->x5ae6}() ->{$this->xf5->x55ee->x5abd}(${$this->x9f->x5630->x6868}->{$this->x9f->x55ee->x5a68}()); foreach (${$this->xec->x561f->x6033} as ${$this->xf5->x561f->{$this->xec->x561f->{$this->x9f->x561f->x6042}}}) { ${$this->xec->x55ee->{$this->xec->x55ee->x5818}}->{$this->xec->x55ee->x5dbd}(new ArrayObject()); ${$this->x9f->x55ee->x581f} = $x557c(${$this->xec->x55ee->{$this->xf5->x55ee->{$this->x9f->x55ee->x581b}}}->{$this->xec->x55ee->x5dc6}(), 2); if (!empty(${$this->xec->x5630->x6889})) { foreach (${$this->xec->x561f->{$this->xf5->x561f->{$this->xf5->x561f->{$this->x9f->x561f->{$this->x9f->x561f->x6050}}}}} as ${$this->xec->x55ee->x582d}) { if (${$this->x9f->x55ee->x5832} = ${$this->xec->x55ee->{$this->x9f->x55ee->x5814}}->{$this->x9f->x55ee->x5dcf}(${$this->x9f->x561f->x6055})) { ${$this->x9f->x5630->{$this->x9f->x5630->x6883}}->{$this->xf5->x55ee->x5dde}()->{$this->x9f->x55ee->x5de3}(${$this->x9f->x5630->{$this->xec->x5630->{$this->x9f->x5630->{$this->xec->x5630->x689b}}}}->{$this->xf5->x55ee->x5ded}()); } } } } $this->{$this->x9f->x55ee->{$this->xf5->x55ee->x56aa}}[${$this->xec->x5630->{$this->xec->x5630->{$this->xf5->x5630->x6872}}}->{$this->x9f->x55ee->x5a68}()] = ${$this->x9f->x5630->x6879}; } return $this->{$this->x9f->x55ee->{$this->x9f->x55ee->{$this->x9f->x55ee->x56af}}}[${$this->x9f->x55ee->x5801}->{$this->x9f->x55ee->x5a68}()]; }  public function getCategoryPathName(Mage_Catalog_Model_Category $x55be, $x55bb = ' > ') {$x55b8 = $this->xf5->x5630->x6a2a;$x6a38 = "h\x65\x6cp\145r";$x6d7f = "ap\160";$x6dae = "\147e\x74M\157\144el";$x6b66 = "\x67et\x53t\x6f\x72e\x43onfi\147";$x6c35 = "\147\x65t\x52\145so\165\162\143\145M\157d\x65\154";$x6d16 = "\144\151\x73\x70a\x74\143hE\166e\156\x74"; ${$this->xec->x561f->{$this->xf5->x561f->x607f}} = $this->{$this->x9f->x561f->x60da}(${$this->x9f->x5630->{$this->xf5->x5630->{$this->x9f->x5630->x68a0}}}->{$this->xf5->x55ee->x5a12}()) ->{$this->x9f->x55ee->x5dcf}(${$this->x9f->x5630->{$this->xf5->x5630->{$this->xec->x5630->{$this->xf5->x5630->x68a3}}}}->{$this->x9f->x55ee->x5a68}()); if (${$this->xf5->x55ee->x583d}) { return $x55b8(${$this->xec->x5630->{$this->xec->x5630->{$this->xec->x5630->{$this->xf5->x5630->x68b4}}}}, (array) ${$this->xf5->x55ee->{$this->x9f->x55ee->{$this->xec->x55ee->x5840}}}->{$this->xf5->x55ee->x5dde}()); } return ${$this->x9f->x5630->{$this->xf5->x5630->{$this->xec->x5630->{$this->xf5->x5630->x68a3}}}}->{$this->xf5->x55ee->x5ded}(); } } 