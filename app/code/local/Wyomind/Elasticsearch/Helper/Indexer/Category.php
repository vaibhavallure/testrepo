<?php

/**     
 * The technical support is guaranteed for all modules proposed by Wyomind.
 * The below code is obfuscated in order to protect the module's copyright as well as the integrity of the license and of the source code.
 * The support cannot apply if modifications have been made to the original source code (https://www.wyomind.com/terms-and-conditions.html).
 * Nonetheless, Wyomind remains available to answer any question you might have and find the solutions adapted to your needs.
 * Feel free to contact our technical team from your Wyomind account in My account > My tickets. 
 * Copyright Â© 2019 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 */
  class Wyomind_Elasticsearch_Helper_Indexer_Category extends Wyomind_Elasticsearch_Helper_Indexer_Abstract {public $x95=null;public $x8d=null;public $xc7=null;  protected $_searchableAttributes;  protected $_categoriesWithPathNames = array();  protected $_blockClass = 'Wyomind_Elasticsearch_Block_Autocomplete_Category';  private $x59fd = null; public $error = "E\x6ca\x73\164\x69c\x73\x65ar\x63\150\x20\x43\141te\147o\162\171 I\156\144e\x78\40\x3a\40\x49\x6e\x76\x61l\151\x64\x20Lice\156se\x21"; public function __construct() {$x666f = "he\154\160\x65\x72";$x69a5 = "\141\x70\160";$x69d3 = "get\x4d\x6f\x64\145\x6c";$x6864 = "\147e\x74Re\x73ou\x72\143\x65\x4d\157\x64e\154";$x6954 = "d\151s\x70\x61tc\x68E\166\x65nt"; $this->_construct(); } public function _construct() {$x666f = "h\x65\x6c\160\145r";$x69a5 = "\141p\160";$x69d3 = "\x67e\x74\115\x6fde\x6c";$x6864 = "\147e\164\x52es\x6fur\x63\145\x4do\x64e\x6c";$x6954 = "\x64\151\163\x70a\x74ch\x45\x76\x65\x6e\x74"; $this->x59fd = Mage::helper("l\x69\143\145n\163\145\155a\x6e\x61g\145\162/d\x61\x74a"); $this->x59fd->constructor($this, func_get_args()); }  public function export($x584a = array()) {$x5812 = $this->x8d->x59eb->{$this->x95->x59eb->x6512};$x57fe = $this->x95->x59c3->{$this->x95->x59c3->{$this->xc7->x59c3->{$this->x95->x59c3->{$this->x95->x59c3->x5ccf}}}};$x583a = $this->x8d->x59eb->{$this->x8d->x59eb->{$this->x8d->x59eb->x6534}};$x5845 = $this->x8d->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->x5ce6}};$x5889 = $this->x8d->x59eb->x6547;$xad6 = $this->xc7->x59eb->{$this->xc7->x59eb->{$this->x8d->x59eb->x655a}};$x10a1 = $this->x95->x59c3->{$this->xc7->x59c3->x5d11};$xb89 = $this->xc7->x59eb->{$this->x8d->x59eb->x6576};$xeb7 = $this->x95->x59eb->{$this->x95->x59eb->{$this->xc7->x59eb->x6583}};$xbfe = $this->x95->x59eb->x6588;$xc2b = $this->x8d->x59c3->x5d39;$xce7 = $this->x8d->x59eb->{$this->x8d->x59eb->{$this->x8d->x59eb->x65af}};$xe6e = $this->x8d->x59c3->{$this->x95->x59c3->{$this->xc7->x59c3->x5d4f}};$xeb5 = $this->x8d->x59c3->{$this->x8d->x59c3->x5d5c};$xf16 = $this->x8d->x59eb->x65d1;$x10b5 = $this->xc7->x59eb->{$this->x8d->x59eb->x65e2};$x666f = "he\154\160er";$x69a5 = "ap\160";$x69d3 = "\x67e\x74\115od\x65\x6c";$x6864 = "g\145\x74\122\145\x73\157\x75\x72\x63\x65\x4d\157\x64\x65\154";$x6954 = "\144i\163\160\141\x74chEv\x65nt"; try { ${$this->x8d->x59eb->x6305} = $this; ${$this->x8d->x59c3->x5a93} = "\115a\x67\x65"; ${$this->x95->x59eb->{$this->x95->x59eb->x631a}} = "\x68\145\154\x70er"; ${$this->x8d->x59eb->x6327} = "\164hr\x6f\167\105x\x63e\x70ti\x6f\156"; ${$this->x8d->x59eb->{$this->xc7->x59eb->{$this->xc7->x59eb->{$this->x95->x59eb->{$this->x95->x59eb->x6342}}}}} = $x5812($x57fe()); ${$this->x8d->x59eb->{$this->x95->x59eb->{$this->x8d->x59eb->x630b}}}->{$this->x8d->x59c3->{$this->x95->x59c3->x5a04}}->{$this->x8d->x59c3->x5e02}(${$this->x8d->x59c3->{$this->xc7->x59c3->x5a8e}}, ${$this->x8d->x59eb->{$this->xc7->x59eb->{$this->xc7->x59eb->{$this->xc7->x59eb->x6340}}}}); if (${$this->x8d->x59eb->{$this->x95->x59eb->{$this->x8d->x59eb->{$this->xc7->x59eb->x630c}}}}->{$this->x8d->x59c3->x5e26}(${$this->xc7->x59c3->x5aab}) != $x5812(${$this->xc7->x59c3->x5aab})) { ${$this->x8d->x59c3->x5a93}::${$this->x8d->x59eb->x6327}(${$this->x95->x59c3->{$this->x8d->x59c3->x5a95}}::${$this->x95->x59eb->{$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x6320}}}}("e\154ast\151c\163\145\141r\143\150")->{$this->x8d->x59c3->x5e2d}(${$this->x8d->x59eb->{$this->x95->x59eb->{$this->x8d->x59eb->{$this->xc7->x59eb->x630c}}}}->{$this->x95->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5a18}}})); } ${$this->x8d->x59c3->{$this->xc7->x59c3->x5ab7}} = array(); ${$this->xc7->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->x5ac9}}}}} = Mage::$x69a5()->{$this->x8d->x59c3->x5e45}(); foreach (Mage::$x69a5()->{$this->xc7->x59c3->x5e66}() as ${$this->x8d->x59eb->x635d}) {  if (!${$this->xc7->x59eb->{$this->xc7->x59eb->x635e}}->{$this->x95->x59c3->x5e75}()) { continue; } Mage::$x69a5()->{$this->x8d->x59c3->x5e91}(${$this->x8d->x59eb->x635d}); ${$this->x95->x59c3->{$this->xc7->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->x5adc}}}} = (int) ${$this->x8d->x59c3->x5aca}->{$this->xc7->x59c3->x5e9d}(); if (isset(${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x6300}}}['store_id'])) { if (!$x583a(${$this->xc7->x59c3->{$this->xc7->x59c3->x5a8a}}['store_id'])) { ${$this->x8d->x59c3->x5a89}['store_id'] = array(${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x6303}}}}['store_id']); } if (!$x5845(${$this->x95->x59c3->{$this->xc7->x59c3->x5ad6}}, ${$this->xc7->x59c3->{$this->xc7->x59c3->x5a8a}}['store_id'])) { continue; } } $this->{$this->x8d->x59c3->x5ea9}(' > Exporting categories of store %s', ${$this->x8d->x59c3->{$this->x95->x59c3->{$this->x8d->x59c3->x5ad0}}}->{$this->xc7->x59c3->x5eb4}()); ${$this->x95->x59eb->x6347}[${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->{$this->x8d->x59eb->x636a}}}}] = array();  ${$this->x95->x59c3->{$this->xc7->x59c3->{$this->x95->x59c3->x5ae6}}} = $this->{$this->xc7->x59c3->x5ebe}('category', ${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x635f}}}); ${$this->xc7->x59eb->x637b} = Mage::$x69d3('catalog/category')->{$this->x95->x59c3->x5ed5}(); ${$this->x95->x59c3->x5aea}->{$this->x8d->x59c3->x5ee8}(${$this->xc7->x59eb->{$this->xc7->x59eb->x635e}}->{$this->xc7->x59c3->x5e9d}()); ${$this->xc7->x59c3->x5af8} = ${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x635f}}}->{$this->x95->x59c3->x5f03}(); ${$this->x8d->x59c3->{$this->xc7->x59c3->{$this->x95->x59c3->x5af2}}}->{$this->x8d->x59c3->x5f16}() ->{$this->x95->x59c3->x5f27}(${$this->xc7->x59eb->{$this->xc7->x59eb->x6371}}) ->{$this->xc7->x59c3->x5f30}('path', array('like' => "1/{${$this->x95->x59c3->{$this->x95->x59c3->x5afc}}}/%")) ->{$this->xc7->x59c3->x5f30}('include_in_menu', array('eq' => 1)); ${$this->x8d->x59c3->{$this->x8d->x59c3->x5aee}}->{$this->xc7->x59c3->x5f47}(); foreach (${$this->x95->x59c3->x5aea} as ${$this->xc7->x59eb->x638c}) { ${$this->x95->x59c3->x5b01}->{$this->x95->x59c3->x5f4d}()->{$this->xc7->x59c3->x5f57}(${$this->x8d->x59eb->x635d}); ${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->{$this->x95->x59eb->x634d}}}}[${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x6369}}}][${$this->x95->x59c3->x5b01}->{$this->xc7->x59c3->x5e9d}()] = $x5889( array( 'id' => ${$this->x8d->x59eb->{$this->x8d->x59eb->x638e}}->{$this->xc7->x59c3->x5e9d}(), '_url' => ${$this->x8d->x59c3->{$this->x8d->x59c3->x5b05}}->{$this->xc7->x59c3->x5f83}(), '_path' => $this->{$this->x95->x59eb->{$this->xc7->x59eb->x64fd}}(${$this->x8d->x59eb->{$this->x8d->x59eb->x638e}}), ), ${$this->x95->x59c3->x5b01}->{$this->x8d->x59c3->x5f97}(${$this->xc7->x59eb->{$this->xc7->x59eb->{$this->x95->x59eb->x6375}}}) ); } $this->{$this->x8d->x59c3->x5ea9}(' > Categories exported'); } Mage::$x69a5()->{$this->x8d->x59c3->x5e91}(${$this->x95->x59eb->{$this->x95->x59eb->{$this->x8d->x59eb->x6358}}}); return ${$this->x95->x59c3->x5ab5}; } catch (Exception $e) { throw $e; } }  public function getSearchableAttributes($x58b5 = null) {$x11a7 = $this->x95->x59c3->x5db8;$x666f = "\x68\145\154\x70e\x72";$x69a5 = "a\x70\x70";$x69d3 = "g\x65\164\115\157d\145\x6c";$x6864 = "\x67\x65\x74R\145s\x6f\x75r\143eM\157de\x6c";$x6954 = "\x64is\160\141\x74c\150\x45\x76e\156\x74"; if (null === $this->{$this->xc7->x59c3->{$this->x95->x59c3->{$this->x95->x59c3->x5a29}}}) { $this->{$this->xc7->x59c3->{$this->x95->x59c3->{$this->x95->x59c3->x5a29}}} = array(); ${$this->x95->x59c3->x5b9a} = $this->{$this->x95->x59c3->x5fe1}()->{$this->xc7->x59c3->x5fef}('catalog_category'); ${$this->x8d->x59eb->{$this->x8d->x59eb->x6420}} = ${$this->x8d->x59c3->{$this->x95->x59c3->{$this->x95->x59c3->{$this->x95->x59c3->x5ba4}}}}->{$this->x8d->x59c3->x5ffc}();  ${$this->x95->x59eb->{$this->x8d->x59eb->x6428}} = Mage::$x6864('catalog/category_attribute_collection') ->{$this->x8d->x59c3->x6016}(${$this->x95->x59c3->x5b9a}->{$this->x8d->x59c3->x602a}()) ->{$this->x8d->x59c3->x6043}('attribute_code', array( 'in' => $this->{$this->xc7->x59c3->x5ebe}('category', ${$this->x8d->x59c3->{$this->x8d->x59c3->{$this->x8d->x59c3->x5b93}}}) )); ${$this->x8d->x59c3->{$this->x95->x59c3->x5bbf}} = ${$this->x8d->x59c3->{$this->x95->x59c3->x5bb3}}->{$this->x8d->x59c3->x6056}(); foreach (${$this->x8d->x59c3->{$this->x95->x59c3->x5bbf}} as ${$this->xc7->x59eb->{$this->x8d->x59eb->x643a}}) {  ${$this->xc7->x59c3->x5bce}->{$this->x95->x59c3->x605f}(${$this->x8d->x59eb->{$this->x95->x59eb->{$this->x8d->x59eb->{$this->xc7->x59eb->x6426}}}}); $this->{$this->xc7->x59c3->{$this->x8d->x59c3->x5a25}}[${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x8d->x59eb->{$this->xc7->x59eb->x643d}}}}->{$this->x95->x59c3->x606d}()] = ${$this->xc7->x59eb->{$this->x8d->x59eb->{$this->x8d->x59eb->x643c}}}; } } return $this->{$this->xc7->x59c3->{$this->x8d->x59c3->x5a25}}; }  public function getStoreIndexProperties($x5927 = null) {$x58ef = $this->x95->x59c3->{$this->x8d->x59c3->x5d92};$x180 = $this->xc7->x59eb->{$this->x95->x59eb->x660c};$x5936 = $this->x95->x59c3->x5da5;$x1247 = $this->xc7->x59eb->{$this->x8d->x59eb->{$this->xc7->x59eb->{$this->xc7->x59eb->{$this->xc7->x59eb->x6631}}}};$x666f = "\x68\x65lp\145r";$x69a5 = "\141pp";$x69d3 = "\x67\145tMode\154";$x6864 = "\x67\x65\164\122\x65\163o\x75\x72c\145M\x6f\x64e\x6c";$x6954 = "di\163p\x61\164c\150Ev\x65nt"; ${$this->x95->x59c3->x5b24} = Mage::$x69a5()->{$this->x8d->x59c3->x5e45}(${$this->x95->x59c3->{$this->x95->x59c3->x5b27}}); ${$this->xc7->x59eb->x63ac} = 'elasticsearch_category_index_properties_' . ${$this->x95->x59c3->{$this->x95->x59c3->x5b27}}->{$this->xc7->x59c3->x5e9d}(); if (Mage::$x69a5()->{$this->x95->x59c3->x60a6}('config')) { ${$this->x95->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x63b9}}} = Mage::$x69a5()->{$this->x8d->x59c3->x60c3}(${$this->xc7->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5b32}}}); if (${$this->x8d->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5b43}}}}}) { return $x58ef(${$this->x8d->x59c3->{$this->x8d->x59c3->x5b3f}}); } } ${$this->x8d->x59c3->x5b3a} = array(); ${$this->x95->x59c3->{$this->x95->x59c3->{$this->x95->x59c3->x5b49}}} = $this->{$this->x95->x59c3->{$this->xc7->x59c3->x5c7f}}(${$this->xc7->x59eb->{$this->xc7->x59eb->{$this->x8d->x59eb->x63a8}}}); foreach (${$this->xc7->x59eb->{$this->x8d->x59eb->x63c0}} as ${$this->x95->x59eb->{$this->xc7->x59eb->{$this->x8d->x59eb->x63c7}}}) {  ${$this->x95->x59c3->x5b53} = ${$this->x95->x59c3->{$this->xc7->x59c3->x5b4f}}->{$this->x95->x59c3->x606d}(); ${$this->x95->x59eb->{$this->xc7->x59eb->{$this->x8d->x59eb->x63c7}}}->{$this->x95->x59c3->x60e4}(true); ${$this->x8d->x59c3->{$this->xc7->x59c3->{$this->xc7->x59c3->x5b40}}}[${$this->x8d->x59c3->{$this->x95->x59c3->{$this->x95->x59c3->x5b58}}}] = $this->{$this->xc7->x59c3->x60f3}(${$this->x95->x59eb->{$this->xc7->x59eb->x63c2}}, ${$this->xc7->x59eb->{$this->xc7->x59eb->{$this->x8d->x59eb->x63a8}}}); }  ${$this->x8d->x59c3->{$this->x8d->x59c3->x5b3f}}['_url'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', );  ${$this->x95->x59eb->{$this->x8d->x59eb->{$this->x8d->x59eb->{$this->xc7->x59eb->{$this->xc7->x59eb->x63be}}}}}['_path'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', ); ${$this->x8d->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5b42}}}} = new Varien_Object(${$this->x95->x59eb->{$this->x8d->x59eb->{$this->x8d->x59eb->{$this->xc7->x59eb->{$this->xc7->x59eb->x63be}}}}}); Mage::$x6954('wyomind_elasticsearch_index_properties', array( 'indexer' => $this, 'store' => ${$this->x95->x59c3->{$this->x95->x59c3->x5b27}}, 'properties' => ${$this->x8d->x59c3->{$this->x8d->x59c3->x5b3f}}, )); ${$this->x95->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x63b9}}} = ${$this->x8d->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5b43}}}}}->{$this->x8d->x59c3->x5e26}(); if (Mage::$x69a5()->{$this->x95->x59c3->x60a6}('config')) { ${$this->x95->x59eb->{$this->x95->x59eb->{$this->x95->x59eb->{$this->x95->x59eb->x63df}}}} = $this->{$this->x95->x59c3->x6134}(); Mage::$x69a5()->{$this->x95->x59c3->x6151}($x5936(${$this->x8d->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5b43}}}}}), ${$this->xc7->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5b32}}}, array('config'), ${$this->xc7->x59c3->{$this->x8d->x59c3->x5b66}}); } return ${$this->x8d->x59c3->{$this->xc7->x59c3->{$this->xc7->x59c3->x5b40}}}; }  public function getCategoriesWithPathNames($x5998 = null) {$x596a = $this->x95->x59eb->x6649;$x666f = "h\145\x6c\x70er";$x69a5 = "\x61\160p";$x69d3 = "\x67et\x4do\x64el";$x6864 = "\x67e\x74\x52e\163o\165\162\143e\115\157\144\145\x6c";$x6954 = "d\151s\160a\164\x63\x68\x45\x76\x65\x6e\x74"; ${$this->x8d->x59eb->{$this->xc7->x59eb->{$this->x95->x59eb->x6447}}} = Mage::$x69a5()->{$this->x8d->x59c3->x5e45}(${$this->x95->x59c3->x5bd5}); if (!isset($this->{$this->x95->x59c3->{$this->xc7->x59c3->{$this->x95->x59c3->x5a62}}}[${$this->x8d->x59eb->{$this->x95->x59eb->x6444}}->{$this->xc7->x59c3->x5e9d}()])) { ${$this->x95->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->{$this->xc7->x59c3->x5be5}}}} = Mage::$x69d3('catalog/category')->{$this->x95->x59c3->x5ed5}() ->{$this->x95->x59c3->x5f27}('name') ->{$this->x8d->x59c3->x5f16}() ->{$this->x8d->x59c3->x5ee8}(${$this->x8d->x59eb->{$this->x95->x59eb->x6444}}->{$this->xc7->x59c3->x5e9d}()); foreach (${$this->xc7->x59eb->x644a} as ${$this->x95->x59eb->{$this->x8d->x59eb->x645a}}) { ${$this->x8d->x59eb->x6455}->{$this->x8d->x59c3->x61d1}(new ArrayObject()); ${$this->x95->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x645f}}} = $x596a(${$this->x8d->x59c3->{$this->x8d->x59c3->x5bed}}->{$this->xc7->x59c3->x61dd}(), 2); if (!empty(${$this->xc7->x59c3->x5bf2})) { foreach (${$this->x95->x59eb->{$this->xc7->x59eb->x645e}} as ${$this->xc7->x59eb->{$this->x95->x59eb->x6464}}) { if (${$this->x95->x59eb->{$this->xc7->x59eb->x6469}} = ${$this->x95->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->{$this->xc7->x59c3->x5be5}}}}->{$this->xc7->x59c3->x61e5}(${$this->x95->x59c3->{$this->x95->x59c3->{$this->x95->x59c3->x5c06}}})) { ${$this->x95->x59eb->{$this->x8d->x59eb->x645a}}->{$this->x95->x59c3->x61f7}()->{$this->xc7->x59c3->x6208}(${$this->xc7->x59c3->x5c0b}->{$this->x8d->x59c3->x6210}()); } } } } $this->{$this->x95->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5a65}}}}[${$this->x8d->x59eb->{$this->xc7->x59eb->{$this->x95->x59eb->x6447}}}->{$this->xc7->x59c3->x5e9d}()] = ${$this->x95->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->{$this->x8d->x59c3->x5bea}}}}}; } return $this->{$this->x95->x59c3->{$this->xc7->x59c3->{$this->x8d->x59c3->{$this->xc7->x59c3->x5a65}}}}[${$this->x95->x59eb->x6442}->{$this->xc7->x59c3->x5e9d}()]; }  public function getCategoryPathName(Mage_Catalog_Model_Category $x59b5, $x59af = ' > ') {$x59ad = $this->x8d->x59eb->{$this->x8d->x59eb->x665b};$x666f = "he\154p\x65r";$x69a5 = "a\x70\x70";$x69d3 = "\147\145tM\157\144el";$x6864 = "\147e\164\x52\x65s\x6f\x75r\x63\145\115\157\x64\x65\154";$x6954 = "d\x69\163patc\x68\x45v\x65n\164"; ${$this->x8d->x59c3->{$this->x95->x59c3->x5c33}} = $this->{$this->xc7->x59eb->x64eb}(${$this->x8d->x59eb->{$this->xc7->x59eb->{$this->x95->x59eb->{$this->xc7->x59eb->{$this->x95->x59eb->x647f}}}}}->{$this->x8d->x59c3->x5e45}()) ->{$this->xc7->x59c3->x61e5}(${$this->x8d->x59eb->{$this->xc7->x59eb->{$this->x95->x59eb->{$this->x95->x59eb->x647e}}}}->{$this->xc7->x59c3->x5e9d}()); if (${$this->xc7->x59c3->x5c31}) { return $x59ad(${$this->xc7->x59c3->{$this->x95->x59c3->x5c2a}}, (array) ${$this->xc7->x59eb->{$this->x95->x59eb->{$this->x8d->x59eb->{$this->x95->x59eb->x6496}}}}->{$this->x95->x59c3->x61f7}()); } return ${$this->xc7->x59c3->x5c19}->{$this->x8d->x59c3->x6210}(); } } 